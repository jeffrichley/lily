Perfect. Here is the fully revised and zipped-project-compliant MVP doc for **Project Lily**, complete with:

* ✅ A lean MVP task list (**clearly marked at the top**)
* 🗂️ File structure matching `.lily/` directory convention
* 🧠 Conversational editing support
* 🧾 Proper markdown formats and lifecycle logic from `README.md`
* 📋 Full feature list broken into MVP and future phases

---

# 🌸 Project Lily – MVP Plan & Feature List

> **Lily is a CLI-native AI assistant for authoring `initial.md` specs and generating agent-ready `prp.md` prompts using a clean, repeatable structure.**
> All data lives under `.lily/`, and the system is fully compatible with MCP tools and project agent flows.

---

## ✅ RUTHLESSLY LEAN MVP – MUST-HAVE FEATURES

**📍 Focus:** Author `initial.md`, generate `prp.md`, track feature status — all via CLI.

### 🔖 MVP Checklist

| ✅                                      | Feature                                                                              | Description |
| -------------------------------------- | ------------------------------------------------------------------------------------ | ----------- |
| \[ ] `FEATURES_LIST.md` under `.lily/` | Tracks all features (name, short description, status emoji)                          |             |
| \[ ] `lily add-feature`                | CLI command to add a new feature or list; auto-creates `FEATURES_LIST.md` if missing |             |
| \[ ] `lily write-initial <name>`       | Conversationally create `.lily/prp/<slug>/initial.md` with 4 sections                |             |
| \[ ] `lily edit-initial <name>`        | Conversationally update any section of the `initial.md`                              |             |
| \[ ] `lily generate-prp <name>`        | Generates `.lily/prp/<slug>/prp.md` using either a domain template or fallback       |             |
| \[ ] `lily list-features`              | Displays a table of features and statuses (📝/🔄/♻️/✅)                               |             |
| \[ ] Domain Template Lookup            | Check for template at `examples/<slug>/prp.md` before using fallback                 |             |
| \[ ] Template Variable Replacement     | Fill `{{GOAL}}`, `{{INPUTS}}`, etc., using parsed `initial.md` content               |             |
| \[ ] Status Emojis                     | Enforce status tracking in `FEATURES_LIST.md` (`📝`, `🔄`, `♻️`, `✅`)                |             |

---

## 📁 Standard Lily Project Layout

```bash
.lily/
├── FEATURES_LIST.md              # Master list of features and statuses
├── prp/
│   ├── export-tool/
│   │   ├── initial.md            # Authored by user + Lily
│   │   └── prp.md                # Generated by Lily
│   └── .../
examples/
├── export-tool/
│   └── prp.md                    # Domain-specific PRP template (optional)
PRPs/
└── templates/
    └── prp_base.md              # Fallback PRP template
```

---

## 📌 `initial.md` Format (From README)

```md
# FEATURE
What is this feature?

# EXAMPLES
- A few examples or usage cases

# DOCUMENTATION
- Links to related tools, specs, or GitHub docs

# OTHER CONSIDERATIONS
- Edge cases, performance notes, constraints
```

---

## 🧾 PRP Template System

Lily uses:

* `examples/<slug>/prp.md` if available
* Otherwise, falls back to `PRPs/templates/prp_base.md`

Populates variables like:

```md
{{GOAL}}, {{INPUTS}}, {{OUTPUTS}}, {{SUCCESS}}, {{CONSTRAINTS}}, {{CONTEXT}}
```

Using content pulled and inferred from `initial.md` and global rules.

---

## 🔮 FUTURE FEATURE PHASES

### Phase 1 – User Experience Polish

* [ ] **Right-side context panel in TUI**
* [ ] **Live markdown preview while editing**
* [ ] **Undo/redo and conversational memory**
* [ ] **Session persistence across CLI launches**

### Phase 2 – Agent Integration & Validation

* [ ] **Support multiple agents (Petal, Claude, etc.)**
* [ ] **`execute_task` → Check agent work via MCP call**
* [ ] **Gatekeeper + Debugger agents**
* [ ] **PRP Prompt Linter**
* [ ] **Rework loop with status update to ♻️**

### Phase 3 – Planning & Orchestration

* [ ] **Dependency Graphing (e.g., DAG of features)**
* [ ] **Auto-scheduling tasks based on dependency resolution**
* [ ] **Archiving of completed PRPs**
* [ ] **Zip export tooling**

### Phase 4 – Plugin & Extension Support

* [ ] **Pluggable template system with import/export**
* [ ] **Coverage checker, security linter**
* [ ] **Lily self-improvement Reprap mode**
* [ ] **Git-aware integrations**

---

## 🧠 Summary

The MVP enables Lily to:

* Accept user-defined features via CLI
* Guide creation of structured `initial.md` files
* Generate valid `prp.md` prompts for agents using templates
* Track and display status in `.lily/FEATURES_LIST.md`
* Operate entirely through a conversational CLI flow with zero GUI dependencies

---

Would you like me to now:

* ✅ Write a `TODOS.me` to track this MVP work?
* 🛠️ Scaffold `FEATURES_LIST.md` with one sample entry?
* 🧪 Simulate the conversational flow of `write-initial`?

Just say the word.
